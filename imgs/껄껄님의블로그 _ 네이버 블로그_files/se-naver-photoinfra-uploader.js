(window.__se_editor_jsonp=window.__se_editor_jsonp||[]).push([[70],{1216:function(e,n,t){var i;/*!phup.js#v0.2.15*/ /*!phup.js#v0.2.15*/
!function(){"use strict";var o=function(){var e=function(){return(new Date).getMilliseconds()+Math.floor(1e5*Math.random())},n=function(e,n){var t=document.createElement("iframe");return t.src=n,t.style.display="none",t.style.position="absolute",t.style.width="1px",t.style.height="1px",t.style.left="-100px",t.style.top="-100px",e.appendChild(t),t},t=function(e,n){var t,i,o,a={};for(t=n.replace("<![CDATA[","").replace("]]>","").match(/<?[^>]*?>([\S\s]*)/)[1].match(/<([^>]*)>([^<]*)<\/([^>]*)>/g),i=0;i<t.length;i+=1)"exif"===(o=t[i].match(/<([^>]*)>([^<]*)<\/[^>]*>/))[1]&&(o[2]=o[2].replace(/&quot;/g,'"')),"index"===o[1]?a[o[1]]=parseInt(o[2],10):"width"===o[1]?a[o[1]]=parseInt(o[2],10):"height"===o[1]?a[o[1]]=parseInt(o[2],10):"fileSize"===o[1]?a[o[1]]=parseInt(o[2],10):"convertedFileSize"===o[1]?a[o[1]]=parseInt(o[2],10):"animatedCnt"===o[1]?a[o[1]]=parseInt(o[2],10):"checkHarm"===o[1]?a[o[1]]="true"==o[2]:a[o[1]]=o[2];return void 0===a.code?a.code="IMAGE":a={index:e,code:a.code},a},i=function(){var e;try{if(window.XMLHttpRequest)e=new XMLHttpRequest;else if(window.ActiveXObject)try{e=new ActiveXObject("Msxml2.XMLHTTP")}catch(n){e=new ActiveXObject("Microsoft.XMLHTTP")}}finally{return e}},o=function(e,n){var t,i=e.substring(e.lastIndexOf(".")+1).toLowerCase();for(t=0;t<n.length;t+=1)if(i===n[t])return!0;return!1},a=function(e,n,o,a,r,s,l){var u=i(),m=new window.FormData;m.append("image",o),u.onload=function(){200===u.status?(e.value=null,a(t(n,u.responseText))):a({index:n,code:"CLIENT"})},u.open("POST",r,!0),l&&l({el:e,index:n,fileName:o.name,xhr:u}),s.millisecond>0&&(u.timeout=s.millisecond,u.ontimeout=function(){s.handler({index:n,fileName:o.name})}),u.send(m)},r=function(e){return function(e){return e?"https:":"http:"}(e.sslEnabled)+"//"+e.domain+"/"+e.sessionKey+"/simpleUpload/"+e.index+"?userId="+e.userId+"&extractExif="+e.extractExif+"&extractAnimatedCnt="+e.extractAnimatedCnt+"&autorotate="+e.autorotate+"&extractDominantColor="+e.extractDominantColor+"&type="+e.type+"&customQuery="+e.customQuery+"&denyAnimatedImage="+e.denyAnimatedImage+"&skipXcamFiltering="+e.skipXcamFiltering},s=[],l=function(e){return function(n){e.done=!0,e.handler(function(e,n){var t,i,o,a={},r=n.split("|");for(t=0;t<r.length;t+=1)(i=r[t].split("="))[1]?("exif"===i[0]?a[i[0]]=i[1].replace(/&quot;/g,'"'):!0===/^[0-9]+$/.test(i[1])?a[i[0]]=parseInt(i[1]):a[i[0]]=i[1],o=i[0]):a[o]=a[o]+"|"+i[0];return a.index=e,a}(e.index,n)),window[e.callback]=null}},u=function(e){e.millisecond>0&&setTimeout(function(){e.done||(window[e.callback]=function(){window[e.callback]=null},e.timeoutHandler({index:e.index,fileName:e.fileName}))},e.millisecond)},m=function(e){if(""===e.el.value)return!1},c=function(e){if(!e.sessionKey)return e.handler({code:"FAIL_TO_GET_SESSION_KEY"}),!1},d=function(e){return e.form?!1!==o(e.imageFileName,e.allowedImageType)||(e.handler({code:"UNSUPPORTED_EXTENSION"}),!1):(e.handler({code:"FAIL_TO_LOAD_IFRAME"}),!1)},p=function(e){return{isNotEmptyString:function(n){if(!("string"==typeof n.value&&n.value.length>0))throw e+n.name+" must be a not empty string"},isString:function(n){if("string"!=typeof n.value)throw e+n.name+" must be a string"},isFunction:function(n){if(!n.value||"function"!=typeof n.value)throw e+n.name+" must be a function"},isBoolean:function(n){if("boolean"!=typeof n.value)throw e+n.name+" must be a boolean"},isNumber:function(n){if("number"!=typeof n.value)throw e+n.name+" must be a number"},isNotEmptyArray:function(n){if(!(n.value instanceof Array&&n.value.length>0))throw e+n.name+" must be a not empty array"},isNotNull:function(n){if(null==n.value)throw e+n.name+" must not be null"},isInputTag:function(n){if(!n.value||!n.value.tagName||"INPUT"!==n.value.tagName)throw e+n.name+" must be an input tag"},isFile:function(n){if(!window.File||!(n.value instanceof File||"[object File]"===n.value.toString()))throw e+n.name+" must be a File"}}},f=void 0!==i()&&void 0!==window.File&&(/naver\.net$/.test(document.domain)||/naver\.com$/.test(document.domain)||/navercorp\.com$/.test(document.domain)||/arcadur\.com$/.test(document.domain)||/webtoons\.com$/.test(document.domain)||/linedict\.com$/.test(document.domain)||/pholar\.co$/.test(document.domain)||/vlive\.tv$/.test(document.domain)||/line\.me$/.test(document.domain)||/line\.biz$/.test(document.domain)||/modoo\.at$/.test(document.domain)||/plug\.game$/.test(document.domain)||/grafolio\.com$/.test(document.domain)||/playsw\.or\.kr$/.test(document.domain)||/selective\.me$/.test(document.domain)||/article\.me$/.test(document.domain)||/whalespace\.io$/.test(document.domain)||/storefarmcenter\.jp$/.test(document.domain)||/storefarm\.jp$/.test(document.domain)||/smartstorecenter\.jp$/.test(document.domain)||/mysmartstore\.jp$/.test(document.domain)||/weverse\.io$/.test(document.domain)||/weversedev\.io$/.test(document.domain)),g={getUploader:function(o,a,s){var m,g,h,y,v,x,w,E,I,_,b,N,S,F,A,C,k,T,B=document.getElementsByTagName("body")[0],P=new p("[phup.js] usage : phup.getUploader(type, handler, options)\n[phup.js] error : "),j={BASE64:{upload:function(n){var p,h=n&&n.base64image,b=n&&n.imageFileName,B=n&&(n.index||0),j="phup_callback_"+e(),U={index:B,millisecond:F.millisecond,handler:a,timeoutHandler:F.handler,done:void 0,callback:j,fileName:b};O(s),P.isNotEmptyString({value:h,name:"param.base64image"}),P.isNotEmptyString({value:b,name:"param.imageFileName"}),S(function(e){var n,s,S=r({sslEnabled:x,domain:y,sessionKey:e,userId:v,extractExif:w,extractAnimatedCnt:E,extractDominantColor:I,autorotate:_,index:B,type:o,customQuery:C,denyAnimatedImage:k,skipXcamFiltering:T});if(0!=c({sessionKey:e,handler:a}))if(f)n=i(),(s=new window.FormData).append("imageFileName",b),s.append("base64image",h),n.onload=function(){200===n.status?a(t(B,n.responseText)):a({index:B,code:"CLIENT"})},n.open("POST",S,!0),A&&A({index:B,fileName:b,xhr:n}),F.millisecond>0&&(n.timeout=F.millisecond,n.ontimeout=function(){F.handler({index:B,fileName:file.name})}),n.send(s);else{if(g=m.contentWindow.document.getElementById("phup_upload_form"),0==d({form:g,handler:a,imageFileName:b,allowedImageType:N}))return;for(window[j]=l(U),p=g.firstChild;null!=p;p=p.nextSibling)switch(p.id){case"phup_callback_func":p.value=j;break;case"imageFileName":p.value=b,p.disabled=null;break;case"base64image":p.value=h,p.disabled=null}g.action=r({sslEnabled:x,domain:y,sessionKey:e,userId:v,extractExif:w,extractAnimatedCnt:E,extractDominantColor:I,autorotate:_,index:B,type:o,customQuery:C,denyAnimatedImage:k,skipXcamFiltering:T}),A&&A({el:el,index:B,fileName:b}),g.submit(),u(U),g.reset()}})}},SIMPLE:{upload:function(n){var l=n&&n.file,u=n&&(n.imageFileName||""),m=n&&(n.index||0);e(),F.millisecond,F.handler;O(s),P.isFile({value:l,name:"param.file"}),P.isString({value:u,name:"param.imageFileName"}),S(function(e){var n,s,d=r({sslEnabled:x,domain:y,sessionKey:e,userId:v,extractExif:w,extractAnimatedCnt:E,extractDominantColor:I,autorotate:_,index:m,type:o,customQuery:C,denyAnimatedImage:k,skipXcamFiltering:T});if(0!=c({sessionKey:e,handler:a})){if(!f)throw"[phup.js] error : SIMPLE uploader requires File & FormData";n=i(),s=new window.FormData,u.length>0&&s.append("imageFileName",u),s.append("image",l),n.onload=function(){200===n.status?a(t(m,n.responseText)):a({index:m,code:"CLIENT"})},n.open("POST",d,!0),A&&A({index:m,fileName:l.name,xhr:n}),F.millisecond>0&&(n.timeout=F.millisecond,n.ontimeout=function(){F.handler({index:m,fileName:l.name})}),n.send(s)}})}}}[o],O=function(e){h=e&&e.resourcePath||"",y=e&&e.domain,v=e&&e.userId,x=e&&(e.sslEnabled||!1),w=e&&(e.extractExif||!1),E=e&&(e.extractAnimatedCnt||!1),I=e&&(e.extractDominantColor||!1),_=e&&(e.autorotate||!1),b=e&&(e.maxFileSize||10485760),N=e&&e.allowedImageType||["png","jpg","jpeg","bmp","gif"],S=e&&e.getSessionKey,F=e&&(e.timeout||{millisecond:0,handler:function(){}}),A=e&&e.onstart,o=e&&e.type||"",C=e&&e.customQuery||"",k=e&&(e.denyAnimatedImage||!1),T=e&&(e.skipXcamFiltering||!1),P.isNotEmptyString({value:y,name:"options.domain"}),P.isNotEmptyString({value:v,name:"options.userId"}),P.isFunction({value:S,name:"options.getSessionKey"}),P.isBoolean({value:x,name:"options.sslEnabled"}),P.isBoolean({value:w,name:"options.extractExif"}),P.isBoolean({value:E,name:"options.extractAnimatedCnt"}),P.isBoolean({value:I,name:"options.extractDominantColor"}),P.isBoolean({value:_,name:"options.autorotate"}),P.isNumber({value:b,name:"options.maxFileSize"}),P.isNotEmptyArray({value:N,name:"options.allowedImageType"}),P.isNumber({value:F.millisecond,name:"options.timeout.millisecond"}),P.isFunction({value:F.handler,name:"options.timeout.handler"}),A&&P.isFunction({value:A,name:"options.onstart"}),P.isString({value:o,name:"options.type"}),P.isString({value:C,name:"options.customQuery"}),P.isBoolean({value:k,name:"options.denyAnimatedImage"}),P.isBoolean({value:T,name:"options.skipXcamFiltering"}),m||f||(m=n(B,h+"/phup_frame.html"))};return P.isNotEmptyString({value:o,name:"type"}),P.isNotNull({value:s,name:"options"}),"function"!=typeof s&&O(s),j}};return g.config=function(t,i,g){var h,y,v,x,w,E,I,_,b,N,S,F,A,C,k,T,B,P,j,O,U,$=document.getElementsByTagName("body")[0],M=document.createElement("div"),X=t&&t.onclick,D=t&&t.onchange,K=(t&&t.multiple,new p("[phup.js] usage : phup.config(el, handler, options)\n[phup.js] error : ")),R=function(e){x=e&&e.resourcePath||"",w=e&&e.domain,E=e&&e.userId,I=e&&(e.sslEnabled||!1),_=e&&(e.extractExif||!1),b=e&&(e.extractAnimatedCnt||!1),N=e&&(e.extractDominantColor||!1),S=e&&(e.autorotate||!1),F=e&&(e.maxFileSize||10485760),A=e&&e.allowedImageType||["png","jpg","jpeg","bmp","gif"],C=e&&e.getSessionKey,k=e&&(e.timeout||{millisecond:0,handler:function(){}}),T=e&&e.onstart,P=e&&e.type||"",j=e&&e.customQuery||"",O=e&&(e.denyAnimatedImage||!1),U=e&&(e.skipXcamFiltering||!1),K.isNotEmptyString({value:w,name:"options.domain"}),K.isNotEmptyString({value:E,name:"options.userId"}),K.isFunction({value:C,name:"options.getSessionKey"}),K.isBoolean({value:I,name:"options.sslEnabled"}),K.isBoolean({value:_,name:"options.extractExif"}),K.isBoolean({value:b,name:"options.extractAnimatedCnt"}),K.isBoolean({value:N,name:"options.extractDominantColor"}),K.isBoolean({value:S,name:"options.autorotate"}),K.isNumber({value:F,name:"options.maxFileSize"}),K.isNotEmptyArray({value:A,name:"options.allowedImageType"}),K.isNumber({value:k.millisecond,name:"options.timeout.millisecond"}),K.isFunction({value:k.handler,name:"options.timeout.handler"}),T&&K.isFunction({value:T,name:"options.onstart"}),K.isString({value:P,name:"options.type"}),K.isString({value:j,name:"options.customQuery"}),K.isBoolean({value:O,name:"options.denyAnimatedImage"}),K.isBoolean({value:U,name:"options.skipXcamFiltering"}),y||f||(y=n($,x+"/phup_frame.html"))};for(B in K.isInputTag({value:t,name:"el"}),s)if(s.hasOwnProperty(B)&&s[B]==t)throw"[phup.js] error : el is already bound with phup.js";s.push(t),K.isFunction({value:i,name:"handler"}),K.isNotNull({value:g,name:"options"}),"function"!=typeof g&&R(g),t.onclick=function(e){if(X&&X(e),"function"==typeof g&&R(g()),C(function(e){h=e,v&&t.onupload(v)}),!document.documentMode)t.value="";else if(10!=function(){var e,n="N/A",t=navigator.userAgent.toLowerCase();return e="Microsoft Internet Explorer"==navigator.appName?"msie ":"trident/.*rv:",null!=new RegExp(e+"([0-9]{1,})(\\.{0,}[0-9]{0,1})").exec(t)&&(n=RegExp.$1+RegExp.$2),parseInt(n,10)}()){var n=t.parentNode,i=t.nextSibling,o=document.createElement("form");o.appendChild(t),o.reset(),n.insertBefore(t,i)}else t.type="radio",t.type="file"},f?(t.onupload=function(){var e,n=t.files;if(D&&D(),0!=m({el:t})&&0!=c({sessionKey:h,handler:i}))for(e=0;e<n.length;e+=1)!1===o(n[e].name,A)?i({index:e,code:"UNSUPPORTED_EXTENSION"}):n[e].size>F?i({index:e,code:"LIMITATION_BY_IMAGE"}):a(t,e,n[e],i,r({sslEnabled:I,domain:w,sessionKey:h,userId:E,extractExif:_,extractAnimatedCnt:b,extractDominantColor:N,autorotate:S,index:e,type:P,customQuery:j,denyAnimatedImage:O,skipXcamFiltering:U}),k,T)},t.onchange=function(e){h?(t.onupload(e),v=null):v=e}):(t.multiple=!1,t.onupload=function(n){var o,a=t.name,s=t.value.replace(/^C:\\fakepath\\/,""),p=t.parentNode,f=t.onclick,g=y.contentWindow.document.getElementById("phup_upload_form"),v="phup_callback_"+e(),x={index:0,millisecond:k.millisecond,handler:function(e){t.onclick=f,i(e)},timeoutHandler:function(e){t.onclick=f,k.handler(e)},done:void 0,callback:v,fileName:s};if(D&&D(n),0!=m({el:t})&&0!=c({sessionKey:h,handler:i})&&0!=d({form:g,handler:i,imageFileName:s,allowedImageType:A})){for(window[v]=l(x),t.name="image",t.onclick=function(e){e&&e.preventDefault&&e.preventDefault()},p.replaceChild(M,t),g.appendChild(t),o=g.firstChild;null!=o;o=o.nextSibling)switch(o.id){case"phup_callback_func":o.value=v}g.action=r({sslEnabled:I,domain:w,sessionKey:h,userId:E,extractExif:_,extractAnimatedCnt:b,extractDominantColor:N,autorotate:S,index:0,type:P,customQuery:j,denyAnimatedImage:O,skipXcamFiltering:U}),T&&T({el:t,index:0,fileName:s}),g.submit(),u(x),g.reset(),t.name=a,p.replaceChild(t,M),t.onclick=f}},t.onchange=function(e){h?(t.onupload(e),v=null):v=e})},g};void 0===(i=function(){return new o}.call(n,t,n,e))||(e.exports=i)}()},1300:function(e,n,t){"use strict";t.r(n);var i=t(59),o=t.n(i),a=t(12),r=t.n(a),s=t(18),l=t.n(s),u=t(0),m=t.n(u),c=function(){function e(){}var n=e.prototype;return n.warmUp=function(){throw new Error("warmUp 인터페이스 구현이 필요합니다. 업로드 전에 준비해야 하는 로직 구현.")},n.upload=function(){throw new Error("upload 인터페이스 구현이 필요합니다. 이미지 파일, URL Copy, BASE64 이미지 데이터 업로드 기능 구현.")},e}(),d=t(686),p=t(527),f=t(16),g=t(75),h=t(339),y=t(1216),v=t.n(y),x=t(90),w=function(e){function n(n){var t;return(t=e.call(this)||this).PROVIDER="NAVER_PHOTO_INFRA",t._config=n,t._phup=v.a||window.phup,t}m()(n,e);var t=n.prototype;return t.setConfig=function(e){this._config=e},t.warmUp=function(){var e=l()(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._makeSessionKey(this._config.sessionUrl);case 2:this._sessionKey=e.sent;case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),t.upload=function(e){return d.a.isFile(e)?this._uploadImageByFile(e):e.indexOf("http")>-1?this._uploadImageByUrl(e):this._uploadImageByBASE64(e)},t._uploadImageByFile=function(e){var n=this,t={file:e,imageFileName:e.fileName};return new Promise(function(e,i){var o=n._config.imageHost;n._createPhupUploaders("SIMPLE",function(n){"IMAGE"===n.code?(n.code="SUCCESS",n.domain=o,e(n)):i({code:n.code})}).upload(t)})},t._uploadImageByBASE64=function(e){var n=this;return new Promise(function(t,i){var o={base64image:e.replace("data:image/png;base64,",""),imageFileName:"image.jpg"},a=n._config.imageHost;n._createPhupUploaders("BASE64",function(e){"IMAGE"===e.code?(e.code="SUCCESS",e.domain=a,t(e)):i({code:e.code})}).upload(o)})},t._uploadImageByUrl=function(e){var n=Math.floor(1e6*Math.random()),t=(this._config.sslEnabled?"https://":"http://")+[this._config.domain,this._sessionKey,"simpleUpload",n].join("/"),i={copyurl:decodeURIComponent(e),extractExif:!0,autorotate:!0,extractAnimatedCnt:!0,userId:this._config.userId},a=this._config.imageHost;return this._config.useCustomQuery&&this._config.customQuery&&(i.customQuery=this._config.customQuery),new Promise(function(n,r){x.b.post(t,{data:i,options:{headers:{"Content-Type":"application/x-www-form-urlencoded"},withCredentials:!0,responseType:"xml",simpleRequestForced:!0},parser:function(e){return e},success:function(t){var i=t.data;if(i.item){var s=i.item||{};n(o()({code:"SUCCESS",domain:a},s))}else{var l=Object(f.a)(i,"result.errors.error.reason.code"),u=p.a.getLocationFromUrlString(decodeURI(e)),m=Object(g.a)(Object(f.a)(u,"pathname","").split("/"));r({file:{name:m,size:0},code:l})}},error:function(){return r({code:"FAIL"})}})})},t._createPhupUploaders=function(e,n){var t=this._createPhupOption(n).options;return"SIMPLE"===e?this._phup.getUploader("SIMPLE",n,t):this._phup.getUploader("BASE64",n,t)},t._makeSessionKey=function(e){return new Promise(function(n,t){x.b.get(e,{options:{withCredentials:!0},success:function(e){n(e.sessionKey)},error:function(e){t(e)}})})},t._createPhupOption=function(e){var n=this,t={domain:this._config.domain||"test.upphoto.naver.com",getSessionKey:function(e){e(n._sessionKey)},userId:this._config.userId,sslEnabled:this._config.sslEnabled,autorotate:!0,resourcePath:this._config.resourcePath+"/lib/phupjs",extractExif:!0,extractAnimatedCnt:!0,denyAnimatedImage:!1,skipXcamFiltering:!0,onstart:function(n){var t=n.index,i=n.xhr;i&&(i.onerror=function(){return e({index:t,code:"SERVER_ERROR"})})}};return this._config.useCustomQuery&&this._config.customQuery&&(t.customQuery=encodeURIComponent(this._config.customQuery)),Object(h.a)(this._config.denyAnimatedImage)&&(t.denyAnimatedImage=this._config.denyAnimatedImage),Object(h.a)(this._config.skipXcamFiltering)&&(t.skipXcamFiltering=this._config.skipXcamFiltering),{options:t}},n}(c);n.default=w}}]);